<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <head th:replace="~{componentes/administrador/head :: head}"></head>
</head>
<body>
    <header th:replace="~{componentes/administrador/header :: header}"></header>

    <!-- Contenido principal -->
    <div class="container">
        <div class="header-actions">
            <h2>Partidos</h2>
            <button class="btn-add" onclick="openModal()">Agregar <span>+</span></button>
        </div>
        
        <!-- Campo de b√∫squeda con icono de lupa -->
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Buscar Partido">
        </div>
        
        <!-- Tabla de partidos -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Nro</th>
                        <th>Equipo 1</th>
                        <th>Equipo 2</th>
                        <th>Delegado 1</th>
                        <th>Delegado 2</th>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="partido, iterStat : ${partidos}">
                        <td th:text="${iterStat.index + 1}"></td>
                        <td th:text="${partido.equipoLocal.equNombre}"></td>
                        <td th:text="${partido.equipoVisitante.equNombre}"></td>
                        <td th:text="${partido.equipoLocal.delegado.nombre + ' ' + partido.equipoLocal.delegado.apellido}"></td>
                        <td th:text="${partido.equipoVisitante.delegado.nombre + ' ' + partido.equipoVisitante.delegado.apellido}"></td>
                        <td th:text="${partido.parFecha != null ? #temporals.format(partido.parFecha, 'dd/MM/yyyy') : 'Sin fecha asignada'}"></td>
                        <td th:text="${partido.parHora != null ? #temporals.format(partido.parHora, 'HH:mm') : 'Sin hora asignada'}"></td>
                        <td class="actions">
                            <form th:action="@{/eliminarPartido/{id}(id=${partido.parId})}" method="post"
                                onsubmit="return confirm('¬øEst√°s seguro de que deseas eliminar este partido?');">
                                <button class="btn-delete" type="submit">üóëÔ∏è</button>
                            </form>
                            <a th:href="@{/editarPartido/{id}(id=${partido.parId})}">‚úèÔ∏è</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Sistema de paginaci√≥n -->
        <div class="pagination">
            <!-- Flecha para ir a la p√°gina anterior -->
            <span class="pagination-arrow">
                <i class="fas fa-chevron-left"></i>
            </span>
            <!-- N√∫meros de p√°gina -->
            <span class="pagination-item active">1</span> <!-- P√°gina actual -->
            <span class="pagination-item">2</span>
            <span class="pagination-item">3</span>
            <!-- Puntos suspensivos para indicar p√°ginas omitidas -->
            <span class="pagination-dots">...</span>
            <span class="pagination-item">8</span>
            <span class="pagination-item">9</span>
            <span class="pagination-item">10</span>
            <!-- Flecha para ir a la p√°gina siguiente -->
            <span class="pagination-arrow">
                <i class="fas fa-chevron-right"></i>
            </span>
        </div>
    </div>
    
    <div class="modal" id="registroModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Registrar Nuevos Partidos</h2>
            </div>
            <form th:action="@{/partidos/sorteo}" method="post">
                <div class="form-grid">
                    <div class="form-group" th:each="i : ${#numbers.sequence(1, 12)}">
                        <label th:for="'equipo' + ${i}">Seleccionar Equipo [[${i}]]:</label>
                        <select id="'equipo' + ${i}" name="'equipo' + ${i}" required>
                            <option value="" disabled selected>Seleccione un equipo</option>
                            <option th:each="equipo : ${equipos}" th:value="${equipo.equId}" th:text="${equipo.equNombre}"></option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">Sortear Equipos</button>
                    <button type="button" class="btn-secondary" onclick="closeModal()">Anular</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function openModal() {
            document.getElementById('registroModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('registroModal').style.display = 'none';
        }
    </script>
</body>
</html>